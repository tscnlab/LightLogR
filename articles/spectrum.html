<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Light Spectrum • LightLogR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Light Spectrum">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LightLogR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Day.html">The whole game</a></li>
    <li><a class="dropdown-item" href="../articles/Import.html">Import &amp; cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/log.html">Log transformation</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/photoperiod.html">Photoperiod</a></li>
    <li><a class="dropdown-item" href="../articles/spectrum.html">Light Spectrum</a></li>
    <li><a class="dropdown-item" href="../articles/states.html">Durations, States and Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Visualizations.html">Visualizations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tscnlab/LightLogR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Light Spectrum</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tscnlab/LightLogR/blob/main/vignettes/articles/spectrum.Rmd" class="external-link"><code>vignettes/articles/spectrum.Rmd</code></a></small>
      <div class="d-none name"><code>spectrum.Rmd</code></div>
    </div>

    
    
<p><img src="images/action_spectra.png"></p>
<p><code>LightLogR</code> focuses on wearable light exposure data,
recorded in the form of, e.g., illuminance. Some devices also provide
spectral information, that has to be preprocessed before being useful in
an analysis. The package has some packages to facilitate this, but the
user is expected to have some knowledge of spectral data and how to
handle it. This article will show how to use the <code>LightLogR</code>
package to process spectral data from the Actlumus device.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tscnlab/LightLogR" class="external-link">LightLogR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.5</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.5.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.3.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.4     </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="importing-data">Importing Data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h2>
<p>We will use data imported and cleaned already in the article <a href="https://tscnlab.github.io/LightLogR/articles/Import.html">Import
&amp; Cleaning</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#this assumes the data is in the cleaned_data folder in the working directory</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"cleaned_data/ll_data.rds"</span><span class="op">)</span></span></code></pre></div>
<p>As can be seen by using <code><a href="../reference/gg_overview.html">gg_overview()</a></code>, the dataset
contains 17 ids with one weeks worth of data each, and one to three
participants per week.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/gg_overview.html">gg_overview</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="spectrum_files/figure-html/overview-1.png" width="700"></p>
<div class="section level4">
<h4 id="spectral-power-distributions">Spectral power distributions<a class="anchor" aria-label="anchor" href="#spectral-power-distributions"></a>
</h4>
<p>Some devices output a spectral power distribution, or SPD, directly.
At the time of writing, the <code>nanoLambda</code> device, and the
<code>OcuWEAR</code> are known to provide these data directly, at least
as an export option. This section can be skipped if a device outputs
SPDs directly.</p>
<p>Other devices do not provide this information directly, but have a
set of channels that can be used to reconstruct the SPD. At the time of
writing, the <code>ActLumus</code> and the <code>VEET</code> devices
belong to this group. Some form of spectral reconstruction is needed to
obtain an SPD from these devices. <code>LightLogR</code> provides one
function to derive SPDs from sensor channels using a calibration matrix.
**These matrices are not provided by <code>LightLogR</code>, but have to
be acquired from the manufacturer of the device, metrology institutions
tasked with device characterization, or the users own calibration
efforts*.</p>
<p>We are going to use a simple dataset from the Actlumus device. First
we load to the calibration matrix. <code>LightLogR</code> has a dummy
matrix for the <code>ActLumus</code> device, but in no way is it a
substitute for a real calibration matrix. The dummy matrix is only used
for testing purposes, and should not be used for real analysis without
checking back with the manufacturer.</p>
<p>The relevant column names are <code>F1</code> to <code>F8</code>,
<code>CLEAR</code>, and <code>IR.Light</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Path to data in LightLogR</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, </span>
<span>              package <span class="op">=</span> <span class="st">"LightLogR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Load the calibration matrix</span></span>
<span><span class="va">calib_mtx</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"ActLumus_dummy_calibration_matrix.csv"</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">9</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">11</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span> <span style="font-weight: bold;">Delimiter:</span> "," <span style="color: #00BB00;">dbl</span></span></span>
<span><span class="co">#&gt; (11): ...1, W1 (F1), W2 (F2), W3 (F3), W4 (F4), W5 (F5), W6 (F6), W7 (F7...</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data. <span style="color: #00BBBB;">ℹ</span></span></span>
<span><span class="co">#&gt; Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span></span>
<span><span class="co">#rename the columns, so that the column names are in line with the actlumus data</span></span>
<span><span class="va">calib_mtx</span> <span class="op">&lt;-</span> </span>
<span><span class="va">calib_mtx</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span> <span class="co">#collect the sensor channel names, which are inside of brackets</span></span>
<span>    <span class="op">~</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">.</span>, pattern <span class="op">=</span> <span class="st">"(?&lt;=\\()[^()]+(?=\\))"</span><span class="op">)</span>, .cols <span class="op">=</span> <span class="op">-</span><span class="va">`...1`</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>wavelength <span class="op">=</span> <span class="va">`...1`</span>, <span class="co">#change the first column to wavelength</span></span>
<span>           IR.LIGHT <span class="op">=</span> <span class="va">IR</span><span class="op">)</span> <span class="co">#rename the IR channel to its name in the dataset</span></span>
<span></span>
<span><span class="co">#show a table of the matrix</span></span>
<span><span class="va">calib_mtx</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Calibration matrix"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="op">-</span><span class="va">wavelength</span><span class="op">)</span></span></code></pre></div>
<div id="mwlefoodfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwlefoodfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwlefoodfi thead, #mwlefoodfi tbody, #mwlefoodfi tfoot, #mwlefoodfi tr, #mwlefoodfi td, #mwlefoodfi th {
  border-style: none;
}

#mwlefoodfi p {
  margin: 0;
  padding: 0;
}

#mwlefoodfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwlefoodfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwlefoodfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwlefoodfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwlefoodfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwlefoodfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwlefoodfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwlefoodfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwlefoodfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwlefoodfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwlefoodfi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwlefoodfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwlefoodfi .gt_from_md > :first-child {
  margin-top: 0;
}

#mwlefoodfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwlefoodfi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwlefoodfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwlefoodfi .gt_row_group_first td {
  border-top-width: 2px;
}

#mwlefoodfi .gt_row_group_first th {
  border-top-width: 2px;
}

#mwlefoodfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwlefoodfi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwlefoodfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_left {
  text-align: left;
}

#mwlefoodfi .gt_center {
  text-align: center;
}

#mwlefoodfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwlefoodfi .gt_font_normal {
  font-weight: normal;
}

#mwlefoodfi .gt_font_bold {
  font-weight: bold;
}

#mwlefoodfi .gt_font_italic {
  font-style: italic;
}

#mwlefoodfi .gt_super {
  font-size: 65%;
}

#mwlefoodfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwlefoodfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwlefoodfi .gt_indent_1 {
  text-indent: 5px;
}

#mwlefoodfi .gt_indent_2 {
  text-indent: 10px;
}

#mwlefoodfi .gt_indent_3 {
  text-indent: 15px;
}

#mwlefoodfi .gt_indent_4 {
  text-indent: 20px;
}

#mwlefoodfi .gt_indent_5 {
  text-indent: 25px;
}

#mwlefoodfi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mwlefoodfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Calibration matrix</caption>
  <thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="wavelength">wavelength</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F1">F1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F2">F2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F3">F3</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F4">F4</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F5">F5</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F6">F6</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F7">F7</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="F8">F8</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CLEAR">CLEAR</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="IR.LIGHT">IR.LIGHT</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="wavelength" class="gt_row gt_right">415</td>
<td headers="F1" class="gt_row gt_right">0.42</td>
<td headers="F2" class="gt_row gt_right">0.02</td>
<td headers="F3" class="gt_row gt_right">0.01</td>
<td headers="F4" class="gt_row gt_right">0.01</td>
<td headers="F5" class="gt_row gt_right">0.01</td>
<td headers="F6" class="gt_row gt_right">0.03</td>
<td headers="F7" class="gt_row gt_right">−0.03</td>
<td headers="F8" class="gt_row gt_right">0.06</td>
<td headers="CLEAR" class="gt_row gt_right">−0.04</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">445</td>
<td headers="F1" class="gt_row gt_right">0.11</td>
<td headers="F2" class="gt_row gt_right">0.25</td>
<td headers="F3" class="gt_row gt_right">−0.02</td>
<td headers="F4" class="gt_row gt_right">0.05</td>
<td headers="F5" class="gt_row gt_right">−0.03</td>
<td headers="F6" class="gt_row gt_right">0.06</td>
<td headers="F7" class="gt_row gt_right">−0.03</td>
<td headers="F8" class="gt_row gt_right">0.05</td>
<td headers="CLEAR" class="gt_row gt_right">−0.04</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">480</td>
<td headers="F1" class="gt_row gt_right">0.02</td>
<td headers="F2" class="gt_row gt_right">0.02</td>
<td headers="F3" class="gt_row gt_right">0.17</td>
<td headers="F4" class="gt_row gt_right">0.04</td>
<td headers="F5" class="gt_row gt_right">−0.02</td>
<td headers="F6" class="gt_row gt_right">0.05</td>
<td headers="F7" class="gt_row gt_right">−0.03</td>
<td headers="F8" class="gt_row gt_right">0.06</td>
<td headers="CLEAR" class="gt_row gt_right">−0.04</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">515</td>
<td headers="F1" class="gt_row gt_right">0.01</td>
<td headers="F2" class="gt_row gt_right">0.02</td>
<td headers="F3" class="gt_row gt_right">−0.01</td>
<td headers="F4" class="gt_row gt_right">0.17</td>
<td headers="F5" class="gt_row gt_right">−0.04</td>
<td headers="F6" class="gt_row gt_right">0.04</td>
<td headers="F7" class="gt_row gt_right">−0.01</td>
<td headers="F8" class="gt_row gt_right">0.02</td>
<td headers="CLEAR" class="gt_row gt_right">−0.02</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">555</td>
<td headers="F1" class="gt_row gt_right">0.01</td>
<td headers="F2" class="gt_row gt_right">0.02</td>
<td headers="F3" class="gt_row gt_right">−0.02</td>
<td headers="F4" class="gt_row gt_right">0.05</td>
<td headers="F5" class="gt_row gt_right">0.08</td>
<td headers="F6" class="gt_row gt_right">0.03</td>
<td headers="F7" class="gt_row gt_right">−0.02</td>
<td headers="F8" class="gt_row gt_right">0.04</td>
<td headers="CLEAR" class="gt_row gt_right">−0.03</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">590</td>
<td headers="F1" class="gt_row gt_right">0.01</td>
<td headers="F2" class="gt_row gt_right">0.01</td>
<td headers="F3" class="gt_row gt_right">0.01</td>
<td headers="F4" class="gt_row gt_right">0.02</td>
<td headers="F5" class="gt_row gt_right">0.02</td>
<td headers="F6" class="gt_row gt_right">0.10</td>
<td headers="F7" class="gt_row gt_right">−0.02</td>
<td headers="F8" class="gt_row gt_right">0.03</td>
<td headers="CLEAR" class="gt_row gt_right">−0.02</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">630</td>
<td headers="F1" class="gt_row gt_right">−0.01</td>
<td headers="F2" class="gt_row gt_right">0.00</td>
<td headers="F3" class="gt_row gt_right">−0.02</td>
<td headers="F4" class="gt_row gt_right">0.03</td>
<td headers="F5" class="gt_row gt_right">−0.06</td>
<td headers="F6" class="gt_row gt_right">0.05</td>
<td headers="F7" class="gt_row gt_right">0.05</td>
<td headers="F8" class="gt_row gt_right">0.00</td>
<td headers="CLEAR" class="gt_row gt_right">0.00</td>
<td headers="IR.LIGHT" class="gt_row gt_right">−0.01</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">680</td>
<td headers="F1" class="gt_row gt_right">0.03</td>
<td headers="F2" class="gt_row gt_right">0.00</td>
<td headers="F3" class="gt_row gt_right">0.07</td>
<td headers="F4" class="gt_row gt_right">−0.01</td>
<td headers="F5" class="gt_row gt_right">0.07</td>
<td headers="F6" class="gt_row gt_right">−0.03</td>
<td headers="F7" class="gt_row gt_right">0.01</td>
<td headers="F8" class="gt_row gt_right">0.08</td>
<td headers="CLEAR" class="gt_row gt_right">−0.03</td>
<td headers="IR.LIGHT" class="gt_row gt_right">0.01</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">750</td>
<td headers="F1" class="gt_row gt_right">−0.03</td>
<td headers="F2" class="gt_row gt_right">−0.02</td>
<td headers="F3" class="gt_row gt_right">−0.03</td>
<td headers="F4" class="gt_row gt_right">0.06</td>
<td headers="F5" class="gt_row gt_right">−0.15</td>
<td headers="F6" class="gt_row gt_right">0.09</td>
<td headers="F7" class="gt_row gt_right">−0.05</td>
<td headers="F8" class="gt_row gt_right">0.01</td>
<td headers="CLEAR" class="gt_row gt_right">0.04</td>
<td headers="IR.LIGHT" class="gt_row gt_right">−0.02</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#convert the matrix to an actual matrix</span></span>
<span><span class="va">calib_mtx</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">calib_mtx</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">column_to_rownames</a></span><span class="op">(</span><span class="st">"wavelength"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Next, we apply the <code><a href="../reference/spectral_reconstruction.html">spectral_reconstruction()</a></code> function to
the dataset. The function takes the sensor channels and the calibration
matrix as input, and returns a tibble with the wavelength and irradiance
values. The function is vectorized, so it can be applied to multiple
rows at once.</p>
<p><strong>Important note: <code><a href="../reference/spectral_reconstruction.html">spectral_reconstruction()</a></code> takes
normalized sensor counts as inputs. The <code>ActLumus</code> device
provides these values in their sensor channels, but other devices may
not. E.g., the <code>VEET</code> device provides raw counts and a gain
value. These values have to be normalized first. See the documentation
for <code><a href="../reference/normalize_counts.html">normalize_counts()</a></code> to derive normalized counts based on
raw counts, gain values, and a gain table. The user has to check the
documentation of the device to find out which columns contain the
normalized sensor counts.</strong></p>
<p>We start by demonstrating how the function works with a single
observation.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_aggregated</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data</span><span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregate_Datetime.html">aggregate_Datetime</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"15 mins"</span><span class="op">)</span> <span class="co">#aggregate the data to 15 min intervals so as to reduce the amount of data</span></span>
<span>  </span>
<span><span class="co">#collect a single row</span></span>
<span><span class="va">single_obs</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">F1</span><span class="op">:</span><span class="va">F8</span>, <span class="va">CLEAR</span>, <span class="va">IR.LIGHT</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#apply the function to the single observation</span></span>
<span><span class="fu"><a href="../reference/spectral_reconstruction.html">spectral_reconstruction</a></span><span class="op">(</span></span>
<span>  sensor_channels <span class="op">=</span> <span class="va">single_obs</span>,</span>
<span>  calibration_matrix <span class="op">=</span> <span class="va">calib_mtx</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="eexombwkke" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#eexombwkke table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#eexombwkke thead, #eexombwkke tbody, #eexombwkke tfoot, #eexombwkke tr, #eexombwkke td, #eexombwkke th {
  border-style: none;
}

#eexombwkke p {
  margin: 0;
  padding: 0;
}

#eexombwkke .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#eexombwkke .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#eexombwkke .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#eexombwkke .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#eexombwkke .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#eexombwkke .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#eexombwkke .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#eexombwkke .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#eexombwkke .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#eexombwkke .gt_spanner_row {
  border-bottom-style: hidden;
}

#eexombwkke .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#eexombwkke .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#eexombwkke .gt_from_md > :first-child {
  margin-top: 0;
}

#eexombwkke .gt_from_md > :last-child {
  margin-bottom: 0;
}

#eexombwkke .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#eexombwkke .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#eexombwkke .gt_row_group_first td {
  border-top-width: 2px;
}

#eexombwkke .gt_row_group_first th {
  border-top-width: 2px;
}

#eexombwkke .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#eexombwkke .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#eexombwkke .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#eexombwkke .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#eexombwkke .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eexombwkke .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eexombwkke .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eexombwkke .gt_left {
  text-align: left;
}

#eexombwkke .gt_center {
  text-align: center;
}

#eexombwkke .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#eexombwkke .gt_font_normal {
  font-weight: normal;
}

#eexombwkke .gt_font_bold {
  font-weight: bold;
}

#eexombwkke .gt_font_italic {
  font-style: italic;
}

#eexombwkke .gt_super {
  font-size: 65%;
}

#eexombwkke .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#eexombwkke .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#eexombwkke .gt_indent_1 {
  text-indent: 5px;
}

#eexombwkke .gt_indent_2 {
  text-indent: 10px;
}

#eexombwkke .gt_indent_3 {
  text-indent: 15px;
}

#eexombwkke .gt_indent_4 {
  text-indent: 20px;
}

#eexombwkke .gt_indent_5 {
  text-indent: 25px;
}

#eexombwkke .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#eexombwkke div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="wavelength">wavelength</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="irradiance">irradiance</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="wavelength" class="gt_row gt_right">415</td>
<td headers="irradiance" class="gt_row gt_right">0.0001272305</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">445</td>
<td headers="irradiance" class="gt_row gt_right">0.0001599880</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">480</td>
<td headers="irradiance" class="gt_row gt_right">0.0002112029</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">515</td>
<td headers="irradiance" class="gt_row gt_right">0.0002981474</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">555</td>
<td headers="irradiance" class="gt_row gt_right">0.0002838125</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">590</td>
<td headers="irradiance" class="gt_row gt_right">0.0002726840</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">630</td>
<td headers="irradiance" class="gt_row gt_right">0.0004778664</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">680</td>
<td headers="irradiance" class="gt_row gt_right">0.0002693977</td>
</tr>
<tr>
<td headers="wavelength" class="gt_row gt_right">750</td>
<td headers="irradiance" class="gt_row gt_right">0.0006490880</td>
</tr>
</tbody>
</table>
</div>
<p>The SPD is rather short, because the calibration matrix only provides
9 wavelength rows. <code><a href="../reference/spectral_reconstruction.html">spectral_reconstruction()</a></code> will output as
many wavelengths, as there are rows in the calibration matrix. Now we
add the Spectrum to the whole dataset. The function provides two ways to
do that. The “long” form creates a list column, while the “wide” form
adds new columns to the dataset. The “long” form is useful for plotting
and spectral integration metrics, while the “wide” form is useful for
easy “access” to individual wavelength values.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># demonstrating the wide form</span></span>
<span><span class="va">data_aggregated</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Spectrum <span class="op">=</span> </span>
<span>      <span class="fu"><a href="../reference/spectral_reconstruction.html">spectral_reconstruction</a></span><span class="op">(</span></span>
<span>        <span class="co">#important to use dplyr::pick, as it expects a named vector or a </span></span>
<span>        <span class="co">#dataframe (the latter of which pick provides)</span></span>
<span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="va">F1</span><span class="op">:</span><span class="va">F8</span>, <span class="va">CLEAR</span>, <span class="va">IR.LIGHT</span><span class="op">)</span>, </span>
<span>        <span class="va">calib_mtx</span>, </span>
<span>        format <span class="op">=</span> <span class="st">"wide"</span> </span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">#show the first 3 observations</span></span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Datetime</span>, <span class="va">Spectrum</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">2000</span><span class="op">:</span><span class="op">(</span><span class="fl">2002</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">Spectrum</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_scientific.html" class="external-link">fmt_scientific</a></span><span class="op">(</span>decimals <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div id="ulbfdpbcyv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ulbfdpbcyv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ulbfdpbcyv thead, #ulbfdpbcyv tbody, #ulbfdpbcyv tfoot, #ulbfdpbcyv tr, #ulbfdpbcyv td, #ulbfdpbcyv th {
  border-style: none;
}

#ulbfdpbcyv p {
  margin: 0;
  padding: 0;
}

#ulbfdpbcyv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ulbfdpbcyv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ulbfdpbcyv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ulbfdpbcyv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ulbfdpbcyv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ulbfdpbcyv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ulbfdpbcyv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ulbfdpbcyv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ulbfdpbcyv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ulbfdpbcyv .gt_spanner_row {
  border-bottom-style: hidden;
}

#ulbfdpbcyv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ulbfdpbcyv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ulbfdpbcyv .gt_from_md > :first-child {
  margin-top: 0;
}

#ulbfdpbcyv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ulbfdpbcyv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ulbfdpbcyv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ulbfdpbcyv .gt_row_group_first td {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_row_group_first th {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ulbfdpbcyv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ulbfdpbcyv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ulbfdpbcyv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ulbfdpbcyv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulbfdpbcyv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulbfdpbcyv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulbfdpbcyv .gt_left {
  text-align: left;
}

#ulbfdpbcyv .gt_center {
  text-align: center;
}

#ulbfdpbcyv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ulbfdpbcyv .gt_font_normal {
  font-weight: normal;
}

#ulbfdpbcyv .gt_font_bold {
  font-weight: bold;
}

#ulbfdpbcyv .gt_font_italic {
  font-style: italic;
}

#ulbfdpbcyv .gt_super {
  font-size: 65%;
}

#ulbfdpbcyv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ulbfdpbcyv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ulbfdpbcyv .gt_indent_1 {
  text-indent: 5px;
}

#ulbfdpbcyv .gt_indent_2 {
  text-indent: 10px;
}

#ulbfdpbcyv .gt_indent_3 {
  text-indent: 15px;
}

#ulbfdpbcyv .gt_indent_4 {
  text-indent: 20px;
}

#ulbfdpbcyv .gt_indent_5 {
  text-indent: 25px;
}

#ulbfdpbcyv .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ulbfdpbcyv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Id">Id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Datetime">Datetime</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a415">415</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a445">445</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a480">480</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a515">515</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a555">555</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a590">590</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a630">630</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a680">680</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a750">750</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="Id" class="gt_row gt_center">205</td>
<td headers="Datetime" class="gt_row gt_right">2023-08-31 19:00:00</td>
<td headers="415" class="gt_row gt_right">5.104 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="445" class="gt_row gt_right">6.158 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="480" class="gt_row gt_right">6.615 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="515" class="gt_row gt_right">7.310 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="555" class="gt_row gt_right">6.475 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="590" class="gt_row gt_right">6.074 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="630" class="gt_row gt_right">6.710 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="680" class="gt_row gt_right">5.456 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="750" class="gt_row gt_right">7.032 × 10<sup style="font-size: 65%;">−3</sup>
</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">205</td>
<td headers="Datetime" class="gt_row gt_right">2023-08-31 19:15:00</td>
<td headers="415" class="gt_row gt_right">1.508 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="445" class="gt_row gt_right">1.981 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="480" class="gt_row gt_right">2.026 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="515" class="gt_row gt_right">2.236 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="555" class="gt_row gt_right">2.177 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="590" class="gt_row gt_right">2.215 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="630" class="gt_row gt_right">2.317 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="680" class="gt_row gt_right">1.605 × 10<sup style="font-size: 65%;">−3</sup>
</td>
<td headers="750" class="gt_row gt_right">1.942 × 10<sup style="font-size: 65%;">−3</sup>
</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">205</td>
<td headers="Datetime" class="gt_row gt_right">2023-08-31 19:30:00</td>
<td headers="415" class="gt_row gt_right">4.106 × 10<sup style="font-size: 65%;">−5</sup>
</td>
<td headers="445" class="gt_row gt_right">2.942 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="480" class="gt_row gt_right">2.586 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="515" class="gt_row gt_right">4.301 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="555" class="gt_row gt_right">6.234 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="590" class="gt_row gt_right">8.531 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="630" class="gt_row gt_right">8.365 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="680" class="gt_row gt_right">2.173 × 10<sup style="font-size: 65%;">−4</sup>
</td>
<td headers="750" class="gt_row gt_right">3.659 × 10<sup style="font-size: 65%;">−4</sup>
</td>
</tr>
</tbody>
</table>
</div>
<p>We require the long form for the further tutorial</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># long form</span></span>
<span><span class="va">data_aggregated</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data_aggregated</span><span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>       Spectrum <span class="op">=</span> </span>
<span>         <span class="fu"><a href="../reference/spectral_reconstruction.html">spectral_reconstruction</a></span><span class="op">(</span></span>
<span>           <span class="co">#important to use dplyr::pick, as it expects a named vector or a </span></span>
<span>           <span class="co">#dataframe (the latter of which pick provides)</span></span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="va">F1</span><span class="op">:</span><span class="va">F8</span>, <span class="va">CLEAR</span>, <span class="va">IR.LIGHT</span><span class="op">)</span>, </span>
<span>           <span class="va">calib_mtx</span>, </span>
<span>           format <span class="op">=</span> <span class="st">"long"</span> <span class="co">#long is also the default</span></span>
<span>           <span class="op">)</span></span>
<span>       <span class="op">)</span></span>
<span></span>
<span><span class="co">#show the first 3 observations</span></span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Datetime</span>, <span class="va">Spectrum</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Id    Datetime            Spectrum        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 201   2023-08-15 <span style="color: #949494;">00:00:00</span> <span style="color: #949494;">&lt;tibble [9 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 201   2023-08-15 <span style="color: #949494;">00:15:00</span> <span style="color: #949494;">&lt;tibble [9 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 201   2023-08-15 <span style="color: #949494;">00:30:00</span> <span style="color: #949494;">&lt;tibble [9 × 2]&gt;</span></span></span></code></pre></div>
<p>Each list column contains the corresponding spectrum. We can plot the
spectra for one day as an example.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_1_day</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/filter_Datetime.html">filter_Date</a></span><span class="op">(</span>length <span class="op">=</span> <span class="st">"1 day"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Id</span> <span class="op">==</span> <span class="st">"201"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_Time_col.html">add_Time_col</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_1_day</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">Spectrum</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#unnest the list column</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wavelength</span>, y <span class="op">=</span> <span class="va">irradiance</span>, group <span class="op">=</span> <span class="va">Datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">MEDI</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"mel EDI (lx)"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_c</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                        labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="spectrum_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The plot shows the spectra for one day, with the color representing
the mel EDI. Consequently, the more irradiance is in the spectrum, the
higher the mel EDI. The plot is not very informative, as the spectra are
all very similar, but it demonstrates that the derived spectra look
plausible.</p>
</div>
</div>
<div class="section level2">
<h2 id="calculating-metrics">Calculating metrics<a class="anchor" aria-label="anchor" href="#calculating-metrics"></a>
</h2>
<div class="section level3">
<h3 id="integration">Integration<a class="anchor" aria-label="anchor" href="#integration"></a>
</h3>
<p>Once we have a spectrum, we can calculate various metrics from it.
This can be done manually, but <code>LightLogR</code> provides a handy
function: <code><a href="../reference/spectral_integration.html">spectral_integration()</a></code>. The function allows to
integrate over portions of a spectrum. E.g., if the short or long
wavelength range of a spectrum is of interest, it can easily be
calculated by it. If just the total irradiance is of interest, the whole
spectrum can be provided without any parameters. By setting a
<code>wavelength_range</code>, the function will integrate over the
specified range.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_aggregated</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Total_irradiance <span class="op">=</span> <span class="va">Spectrum</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">spectral_integration</span><span class="op">)</span>,</span>
<span>    short_wl <span class="op">=</span> <span class="va">Spectrum</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">spectral_integration</span>, </span>
<span>                          wavelength.range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">300</span>, <span class="fl">500</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    long_wl <span class="op">=</span> <span class="va">Spectrum</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">spectral_integration</span>, </span>
<span>                          wavelength.range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">800</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    short_long_ratio <span class="op">=</span> <span class="va">short_wl</span> <span class="op">/</span> <span class="va">long_wl</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Because the spectra are contained in a list column,
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map_dbl()</a></code> is used obtain a single result per
observation. What do the results look like?</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#summarize spectral data per participant</span></span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Total_irradiance</span>, <span class="va">short_wl</span>, <span class="va">long_wl</span>, <span class="va">short_long_ratio</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/summarize_numeric.html">summarize_numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">fmt_number</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="kgufivjubq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kgufivjubq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kgufivjubq thead, #kgufivjubq tbody, #kgufivjubq tfoot, #kgufivjubq tr, #kgufivjubq td, #kgufivjubq th {
  border-style: none;
}

#kgufivjubq p {
  margin: 0;
  padding: 0;
}

#kgufivjubq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kgufivjubq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kgufivjubq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kgufivjubq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kgufivjubq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kgufivjubq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kgufivjubq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kgufivjubq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kgufivjubq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kgufivjubq .gt_spanner_row {
  border-bottom-style: hidden;
}

#kgufivjubq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kgufivjubq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kgufivjubq .gt_from_md > :first-child {
  margin-top: 0;
}

#kgufivjubq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kgufivjubq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kgufivjubq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kgufivjubq .gt_row_group_first td {
  border-top-width: 2px;
}

#kgufivjubq .gt_row_group_first th {
  border-top-width: 2px;
}

#kgufivjubq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kgufivjubq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kgufivjubq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kgufivjubq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kgufivjubq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kgufivjubq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kgufivjubq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kgufivjubq .gt_left {
  text-align: left;
}

#kgufivjubq .gt_center {
  text-align: center;
}

#kgufivjubq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kgufivjubq .gt_font_normal {
  font-weight: normal;
}

#kgufivjubq .gt_font_bold {
  font-weight: bold;
}

#kgufivjubq .gt_font_italic {
  font-style: italic;
}

#kgufivjubq .gt_super {
  font-size: 65%;
}

#kgufivjubq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kgufivjubq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kgufivjubq .gt_indent_1 {
  text-indent: 5px;
}

#kgufivjubq .gt_indent_2 {
  text-indent: 10px;
}

#kgufivjubq .gt_indent_3 {
  text-indent: 15px;
}

#kgufivjubq .gt_indent_4 {
  text-indent: 20px;
}

#kgufivjubq .gt_indent_5 {
  text-indent: 25px;
}

#kgufivjubq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kgufivjubq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Id">Id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean_Total_irradiance">mean_Total_irradiance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean_short_wl">mean_short_wl</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean_long_wl">mean_long_wl</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean_short_long_ratio">mean_short_long_ratio</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="episodes">episodes</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="Id" class="gt_row gt_center">201</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">2.72</td>
<td headers="mean_short_wl" class="gt_row gt_right">0.49</td>
<td headers="mean_long_wl" class="gt_row gt_right">0.89</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.82</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">202</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">0.97</td>
<td headers="mean_short_wl" class="gt_row gt_right">0.18</td>
<td headers="mean_long_wl" class="gt_row gt_right">0.32</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.06</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">204</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">6.52</td>
<td headers="mean_short_wl" class="gt_row gt_right">1.13</td>
<td headers="mean_long_wl" class="gt_row gt_right">2.28</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.46</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">205</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">3.40</td>
<td headers="mean_short_wl" class="gt_row gt_right">0.61</td>
<td headers="mean_long_wl" class="gt_row gt_right">1.16</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.46</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">206</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">0.30</td>
<td headers="mean_short_wl" class="gt_row gt_right">0.05</td>
<td headers="mean_long_wl" class="gt_row gt_right">0.11</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.40</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
<tr>
<td headers="Id" class="gt_row gt_center">208</td>
<td headers="mean_Total_irradiance" class="gt_row gt_right">1.10</td>
<td headers="mean_short_wl" class="gt_row gt_right">0.17</td>
<td headers="mean_long_wl" class="gt_row gt_right">0.39</td>
<td headers="mean_short_long_ratio" class="gt_row gt_right">0.61</td>
<td headers="episodes" class="gt_row gt_right">577.00</td>
</tr>
</tbody>
</table>
</div>
<p>In the “per participant” summary, we see the total irradiance, as
well as the portions falling in the short and long wavelength ranges
respectively. We also see, that the long wavelength range is always
higher compared to the short one, which is expressed in the ratio.</p>
</div>
<div class="section level3">
<h3 id="weighted-integration">Weighted integration<a class="anchor" aria-label="anchor" href="#weighted-integration"></a>
</h3>
<p><code><a href="../reference/spectral_integration.html">spectral_integration()</a></code> also allows to calculate weigthed
integrations. Examples for weigthed integrations are illuminance
(weighed by the photopic action spectrum), melanopic EDI (weighed by the
melanopic action spectrum), and also the other alphaopic metrics. Any
spectrum can be provided to the function via the
<code>action.spectrum</code> argument (see the documentation for more
info). There are also a number of inbuilt spectra:</p>
<ul>
<li>
<code>photopic</code>: the photopic action spectrum</li>
<li>
<code>melanopic</code>: the melanopic action spectrum</li>
<li>
<code>rhodopic</code>: the rhodopic action spectrum</li>
<li>
<code>l_cone_opic</code>: the L-cone action spectrum</li>
<li>
<code>m_cone_opic</code>: the M-cone action spectrum</li>
<li>
<code>s_cone_opic</code>: the S-cone action spectrum</li>
</ul>
<p>The basis for integration can be found in the dataset
<code>alphaopic.action.spectra</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#show the action spectra</span></span>
<span><span class="va">alphaopic.action.spectra</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">wavelength</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wavelength</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"Action spectrum"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"limegreen"</span>,<span class="st">"darkred"</span>, <span class="st">"#1D63DC"</span>, <span class="st">"gold1"</span>,</span>
<span>                                <span class="st">"grey60"</span>, <span class="st">"darkviolet"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="spectrum_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>In the final step, we will calculate illuminance and melanopic EDI
from the Spectra and compare the derived values from the
<code>ActLumus</code> direct export. The function will return the value
in <code>lx</code> or <code>mel EDI</code> depending on the action
spectrum provided.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_aggregated</span> <span class="op">&lt;-</span> </span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    illuminance <span class="op">=</span> <span class="va">Spectrum</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">spectral_integration</span>,</span>
<span>                                      action.spectrum <span class="op">=</span> <span class="st">"photopic"</span>,</span>
<span>                                      general.weight <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span>,</span>
<span>    melEDI <span class="op">=</span> <span class="va">Spectrum</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">spectral_integration</span>, </span>
<span>                          action.spectrum <span class="op">=</span> <span class="st">"melanopic"</span>,</span>
<span>                          general.weight <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Datetime</span>, <span class="va">LIGHT</span>, <span class="va">MEDI</span>, <span class="va">illuminance</span>, <span class="va">melEDI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_Time_col.html">add_Time_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">MEDI</span>, y <span class="op">=</span> <span class="va">melEDI</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span> <span class="va">MEDI</span><span class="op">/</span><span class="va">melEDI</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, col <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_c</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                        limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>                        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>                        labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">label_percent</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                                          breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>,<span class="fl">10</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                                          breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">10</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> </span></code></pre></div>
<p><img src="spectrum_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">data_aggregated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Datetime</span>, <span class="va">LIGHT</span>, <span class="va">MEDI</span>, <span class="va">illuminance</span>, <span class="va">melEDI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_Time_col.html">add_Time_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">LIGHT</span>, y <span class="op">=</span> <span class="va">illuminance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span> <span class="va">LIGHT</span><span class="op">/</span><span class="va">illuminance</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, col <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_c</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                        limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>                        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>                        labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">label_percent</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                                          breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>,<span class="fl">10</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                                          breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">10</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> </span></code></pre></div>
<p><img src="spectrum_files/figure-html/unnamed-chunk-10-2.png" width="700"></p>
<p>Why are there such strong deviations between the wearable data and
the reconstructed spectrum, especially in the lower regions of melanopic
EDI? The three most likely reasons are:</p>
<ul>
<li><p>The calibration matrix used for reconstruction here is not the
same as used when recording the data</p></li>
<li><p>Another method for conversion was used</p></li>
<li><p>Other internal routines check for implausible values (such as
negative values).</p></li>
</ul>
<p>Indeed, ActLumus devices have their own calibration matrices for each
photopic and alphaopic quantity, which can explain the differences seen.
<code>LightLogR</code>s goal is not to reproduce every manufacturers
internal routines, but rather provide standardized pipelines for
analysis. Wearable devices are not laboratory-grade measurement devices,
and should not be treated as such. Thus, users can work with the derived
spectra, but should do so with care.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Zauner, Manuel Spitschan, Steffen Hartmeyer, MeLiDos, EURAMET, European Union.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
