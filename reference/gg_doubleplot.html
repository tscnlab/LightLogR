<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Double Plots — gg_doubleplot • LightLogR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Double Plots — gg_doubleplot"><meta name="description" content="The function is by default opinionated, and will automatically select the best way to display the double date plot. However, the user can also manually select the type of double date plot to be displayed: repeating each day (default when there is only one day in all of the groups), or displaying consecutive days (default when there are multiple days in the groups)."><meta property="og:description" content="The function is by default opinionated, and will automatically select the best way to display the double date plot. However, the user can also manually select the type of double date plot to be displayed: repeating each day (default when there is only one day in all of the groups), or displaying consecutive days (default when there are multiple days in the groups)."><meta property="og:image" content="https://tscnlab.github.io/LightLogR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LightLogR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Day.html">The whole game</a></li>
    <li><a class="dropdown-item" href="../articles/Import.html">Import &amp; cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/log.html">Log transformation</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/photoperiod.html">Photoperiod</a></li>
    <li><a class="dropdown-item" href="../articles/spectrum.html">Light Spectrum</a></li>
    <li><a class="dropdown-item" href="../articles/states.html">Durations, States and Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Visualizations.html">Visualizations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tscnlab/LightLogR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Double Plots</h1>
      <small class="dont-index">Source: <a href="https://github.com/tscnlab/LightLogR/blob/main/R/gg_doubleplot.R" class="external-link"><code>R/gg_doubleplot.R</code></a></small>
      <div class="d-none name"><code>gg_doubleplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function is by default opinionated, and will automatically select the best way to display the double date plot. However, the user can also manually select the type of double date plot to be displayed: repeating each day (default when there is only one day in all of the groups), or displaying consecutive days (default when there are multiple days in the groups).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gg_doubleplot</span><span class="op">(</span></span>
<span>  <span class="va">dataset</span>,</span>
<span>  Datetime.colname <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"repeat"</span>, <span class="st">"next"</span><span class="op">)</span>,</span>
<span>  geom <span class="op">=</span> <span class="st">"ribbon"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"grey40"</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"#EFC000FF"</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  x.axis.breaks.next <span class="op">=</span> <span class="va">Datetime_breaks</span>,</span>
<span>  x.axis.format.next <span class="op">=</span> <span class="st">"%a %D"</span>,</span>
<span>  x.axis.breaks.repeat <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="Datetime_breaks.html">Datetime_breaks</a></span><span class="op">(</span><span class="va">.x</span>, by <span class="op">=</span> <span class="st">"6 hours"</span>, shift <span class="op">=</span></span>
<span>    <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">duration</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"hours"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  x.axis.format.repeat <span class="op">=</span> <span class="st">"%H:%M"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>A light logger dataset. Expects a <code>dataframe</code>. If not imported
by <a href="LightLogR-package.html">LightLogR</a>, take care to choose a sensible variable for the
<code>Datetime.colname</code>.</p></dd>


<dt id="arg-datetime-colname">Datetime.colname<a class="anchor" aria-label="anchor" href="#arg-datetime-colname"></a></dt>
<dd><p>column name that contains the datetime. Defaults to
<code>"Datetime"</code> which is automatically correct for data imported with
<a href="LightLogR-package.html">LightLogR</a>. Expects a <code>symbol</code>. Needs to be part of the <code>dataset</code>. Must
be of type <code>POSIXct</code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>One of "auto", "repeat", or "next". The default is "auto", which will automatically select the best way to display the double date plot based on the amount of days in the dataset (<code>all = 1 &gt;&gt; "repeat", else "next</code>). "repeat" will repeat each day in the plot, and "next" will display consecutive days.</p></dd>


<dt id="arg-geom">geom<a class="anchor" aria-label="anchor" href="#arg-geom"></a></dt>
<dd><p>The type of geom to be used in the plot. The default is "ribbon".</p></dd>


<dt id="arg-alpha-linewidth">alpha, linewidth<a class="anchor" aria-label="anchor" href="#arg-alpha-linewidth"></a></dt>
<dd><p>The alpha and linewidth setting of the geom. The default is 0.5 and 0.4, respectively.</p></dd>


<dt id="arg-col-fill">col, fill<a class="anchor" aria-label="anchor" href="#arg-col-fill"></a></dt>
<dd><p>The color and fill of the geom. The default is "#EFC000FF". If the parameters <code>aes_col</code> or <code>aes_fill</code> are used through <code>...</code>, these will override the respective <code>col</code> and <code>fill</code> parameters.</p></dd>


<dt id="arg-x-axis-breaks-next-x-axis-breaks-repeat">x.axis.breaks.next, x.axis.breaks.repeat<a class="anchor" aria-label="anchor" href="#arg-x-axis-breaks-next-x-axis-breaks-repeat"></a></dt>
<dd><p>Datetime breaks when consecutive days are displayed (<code>type = "next"</code>) or days are repeated (<code>type = "repeat"</code>). Must be a function. The default for <code><a href="https://rdrr.io/r/base/Control.html" class="external-link">next</a></code> is a label at 12:00 am of each day, and for <code>repeat</code> is a label every 6 hours.</p></dd>


<dt id="arg-x-axis-format-next-x-axis-format-repeat">x.axis.format.next, x.axis.format.repeat<a class="anchor" aria-label="anchor" href="#arg-x-axis-format-next-x-axis-format-repeat"></a></dt>
<dd><p>Datetime label format when consecutive days are displayed (<code>type = "next"</code>) or days are repeated (<code>type = "repeat"</code>). The default for <code><a href="https://rdrr.io/r/base/Control.html" class="external-link">next</a></code> is <code>"%a %D"</code>, showing the date, and for <code>repeat</code> ist <code>"%H:%M"</code>, showing hours and minutes. See <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strptime()</a></code> for more options.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to <code><a href="gg_days.html">gg_days()</a></code>. When the arguments <code>aes_col</code> and <code>aes_fill</code> are used, they will invalidate the <code>col</code> and <code>fill</code> parameters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a ggplot object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>gg_doubleplot()</code> is a wrapper function for <code><a href="gg_days.html">gg_days()</a></code>, combined with an internal function to duplicate and reorganize dates in a dataset for a <em>double plot</em> view. This means that the same day is displayed multiple times within the plot in order to reveal pattern across days.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#take only the Participant data from sample data, and three days</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sample.data</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Id</span> <span class="op">==</span> <span class="st">"Participant"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu"><a href="filter_Datetime.html">filter_Date</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#create a double plot with the default settings</span></span></span>
<span class="r-in"><span><span class="va">sample.data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">gg_doubleplot</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_doubleplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#repeat the same day in the plot</span></span></span>
<span class="r-in"><span><span class="va">sample.data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">gg_doubleplot</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"repeat"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_doubleplot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#more examples that are not executed for computation time:</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">#use the function with more than one Id</span></span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu"><a href="filter_Datetime.html">filter_Date</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu">gg_doubleplot</span><span class="op">(</span>aes_fill <span class="op">=</span> <span class="va">Id</span>, aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">Date.data</span>, ncol <span class="op">=</span> <span class="fl">1</span>, scales <span class="op">=</span> <span class="st">"free_x"</span>, strip.position <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_doubleplot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#if data is already grouped by days, type = "repeat" will be automatic</span></span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>Date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html" class="external-link">date</a></span><span class="op">(</span><span class="va">Datetime</span><span class="op">)</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu"><a href="filter_Datetime.html">filter_Date</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span><span class="fu">gg_doubleplot</span><span class="op">(</span>aes_fill <span class="op">=</span> <span class="va">Id</span>, aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span>, col <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> <span class="co">#remove the legend</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">Date.data</span>, ncol <span class="op">=</span> <span class="fl">1</span>, scales <span class="op">=</span> <span class="st">"free_x"</span>, strip.position <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_doubleplot-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#combining `aggregate_Date()` with `gg_doubleplot()` easily creates a good</span></span></span>
<span class="r-in"><span><span class="co">#overview of the data</span></span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu"><a href="aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu">gg_doubleplot</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_doubleplot-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Zauner, Manuel Spitschan, Steffen Hartmeyer, MeLiDos, EURAMET, European Union.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

