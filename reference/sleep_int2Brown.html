<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Recode Sleep/Wake intervals to Brown state intervals — sleep_int2Brown • LightLogR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Recode Sleep/Wake intervals to Brown state intervals — sleep_int2Brown"><meta name="description" content="Takes a dataset with sleep/wake intervals and recodes them to Brown state
intervals. Specifically, it recodes the sleep intervals to night, reduces
wake intervals by a specified evening.length and recodes them to
evening and day intervals. The evening.length is the time between day
and night. The result can be used as input for interval2state() and might
be used subsequently with Brown2reference()."><meta property="og:description" content="Takes a dataset with sleep/wake intervals and recodes them to Brown state
intervals. Specifically, it recodes the sleep intervals to night, reduces
wake intervals by a specified evening.length and recodes them to
evening and day intervals. The evening.length is the time between day
and night. The result can be used as input for interval2state() and might
be used subsequently with Brown2reference()."><meta property="og:image" content="https://tscnlab.github.io/LightLogR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LightLogR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Day.html">The whole game</a></li>
    <li><a class="dropdown-item" href="../articles/Import.html">Import &amp; cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/log.html">Log transformation</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/photoperiod.html">Photoperiod</a></li>
    <li><a class="dropdown-item" href="../articles/spectrum.html">Light Spectrum</a></li>
    <li><a class="dropdown-item" href="../articles/states.html">Durations, States and Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Visualizations.html">Visualizations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tscnlab/LightLogR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Recode Sleep/Wake intervals to Brown state intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/tscnlab/LightLogR/blob/v0.9.0/R/sleepint2Brown.R" class="external-link"><code>R/sleepint2Brown.R</code></a></small>
      <div class="d-none name"><code>sleep_int2Brown.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes a dataset with sleep/wake intervals and recodes them to Brown state
intervals. Specifically, it recodes the <code>sleep</code> intervals to <code>night</code>, reduces
<code>wake</code> intervals by a specified <code>evening.length</code> and recodes them to
<code>evening</code> and <code>day</code> intervals. The <code>evening.length</code> is the time between <code>day</code>
and <code>night</code>. The result can be used as input for <code><a href="interval2state.html">interval2state()</a></code> and might
be used subsequently with <code><a href="Brown2reference.html">Brown2reference()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sleep_int2Brown</span><span class="op">(</span></span>
<span>  <span class="va">dataset</span>,</span>
<span>  Interval.colname <span class="op">=</span> <span class="va">Interval</span>,</span>
<span>  Sleep.colname <span class="op">=</span> <span class="va">State</span>,</span>
<span>  wake.state <span class="op">=</span> <span class="st">"wake"</span>,</span>
<span>  sleep.state <span class="op">=</span> <span class="st">"sleep"</span>,</span>
<span>  Brown.day <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  Brown.evening <span class="op">=</span> <span class="st">"evening"</span>,</span>
<span>  Brown.night <span class="op">=</span> <span class="st">"night"</span>,</span>
<span>  evening.length <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  Brown.state.colname <span class="op">=</span> <span class="va">State.Brown</span>,</span>
<span>  output.dataset <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>A dataset with sleep/wake intervals.</p></dd>


<dt id="arg-interval-colname">Interval.colname<a class="anchor" aria-label="anchor" href="#arg-interval-colname"></a></dt>
<dd><p>The name of the column with the intervals. Defaults to <code>Interval</code>.</p></dd>


<dt id="arg-sleep-colname">Sleep.colname<a class="anchor" aria-label="anchor" href="#arg-sleep-colname"></a></dt>
<dd><p>The name of the column with the sleep/wake states. Defaults to <code>State</code>.</p></dd>


<dt id="arg-wake-state-sleep-state">wake.state, sleep.state<a class="anchor" aria-label="anchor" href="#arg-wake-state-sleep-state"></a></dt>
<dd><p>The names of the wake and sleep states in the <code>Sleep.colname</code>. Default to <code>"wake"</code> and <code>"sleep"</code>. Expected to be a <code>character</code> scalar and must be an exact match.</p></dd>


<dt id="arg-brown-day-brown-evening-brown-night">Brown.day, Brown.evening, Brown.night<a class="anchor" aria-label="anchor" href="#arg-brown-day-brown-evening-brown-night"></a></dt>
<dd><p>The names of the Brown states that will be used. Defaults to <code>"day"</code>, <code>"evening"</code> and <code>"night"</code>.</p></dd>


<dt id="arg-evening-length">evening.length<a class="anchor" aria-label="anchor" href="#arg-evening-length"></a></dt>
<dd><p>The length of the evening interval in seconds. Can also use <span class="pkg">lubridate</span> duration or period objects. Defaults to 3 hours.</p></dd>


<dt id="arg-brown-state-colname">Brown.state.colname<a class="anchor" aria-label="anchor" href="#arg-brown-state-colname"></a></dt>
<dd><p>The name of the column with the newly created Brown states. Works as a simple renaming of the <code>Sleep.colname</code>.</p></dd>


<dt id="arg-output-dataset">output.dataset<a class="anchor" aria-label="anchor" href="#arg-output-dataset"></a></dt>
<dd><p>Whether to return the whole <code>dataset</code> or a <code>vector</code> with the Brown states.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataset with the Brown states or a vector with the Brown states. The Brown states are created in a new column with the name specified in <code>Brown.state.colname</code>. The dataset will have more rows than the original dataset, because the <code>wake</code> intervals are split into <code>day</code> and <code>evening</code> intervals.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function will filter out any non-sleep intervals that are shorter than the specified <code>evening.length</code>. This prevents problematic behaviour when the <code>evening.length</code> is longer than the <code>wake</code> intervals or, e.g., when the first state is sleep after midnight and there is a prior <code>NA</code> interval from midnight till sleep. This behavior might, however, result in problematic results for specialized experimental setups with ultra short wake/sleep cycles. The <code>sleep_int2Brown()</code> function would not be applicable in those cases anyways.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.3001571</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Brown:
<code><a href="Brown2reference.html">Brown2reference</a>()</code>,
<code><a href="Brown_check.html">Brown_check</a>()</code>,
<code><a href="Brown_cut.html">Brown_cut</a>()</code>,
<code><a href="Brown_rec.html">Brown_rec</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#create a sample dataset</span></span></span>
<span class="r-in"><span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>Datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-08-15 6:00:00"</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"2023-08-15 23:00:00"</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"2023-08-16 6:00:00"</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"2023-08-16 22:00:00"</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"2023-08-17 6:30:00"</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"2023-08-18 1:00:00"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         State <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wake"</span>, <span class="st">"sleep"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         Id <span class="op">=</span> <span class="st">"Participant"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#intervals from sample</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sc2interval.html">sc2interval</a></span><span class="op">(</span><span class="va">sample</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 7 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   State Id          Interval                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;Interval&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          2023-08-15 00:00:00 UTC--2023-08-15 06:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> wake  Participant 2023-08-15 06:00:00 UTC--2023-08-15 23:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> sleep Participant 2023-08-15 23:00:00 UTC--2023-08-16 06:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> wake  Participant 2023-08-16 06:00:00 UTC--2023-08-16 22:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> sleep Participant 2023-08-16 22:00:00 UTC--2023-08-17 06:30:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> wake  Participant 2023-08-17 06:30:00 UTC--2023-08-18 01:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sleep Participant 2023-08-18 01:00:00 UTC--2023-08-19 00:00:00 UTC</span>
<span class="r-in"><span><span class="co">#recoded intervals                       </span></span></span>
<span class="r-in"><span><span class="fu"><a href="sc2interval.html">sc2interval</a></span><span class="op">(</span><span class="va">sample</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">sleep_int2Brown</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    State.Brown Id          Interval                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;Interval&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>          2023-08-15 00:00:00 UTC--2023-08-15 06:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> day         Participant 2023-08-15 06:00:00 UTC--2023-08-15 20:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> evening     Participant 2023-08-15 20:00:00 UTC--2023-08-15 23:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> night       Participant 2023-08-15 23:00:00 UTC--2023-08-16 06:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> day         Participant 2023-08-16 06:00:00 UTC--2023-08-16 19:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> evening     Participant 2023-08-16 19:00:00 UTC--2023-08-16 22:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> night       Participant 2023-08-16 22:00:00 UTC--2023-08-17 06:30:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> day         Participant 2023-08-17 06:30:00 UTC--2023-08-17 22:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> evening     Participant 2023-08-17 22:00:00 UTC--2023-08-18 01:00:00 UTC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> night       Participant 2023-08-18 01:00:00 UTC--NA                     </span>
<span class="r-in"><span>                                         </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Zauner, Manuel Spitschan, Steffen Hartmeyer, MeLiDos, EURAMET, European Union.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

