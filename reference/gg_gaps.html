<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visualize gaps and irregular data — gg_gaps • LightLogR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualize gaps and irregular data — gg_gaps"><meta name="description" content="gg_gaps() is built upon gg_days(), gap_finder(), and gg_state() to
visualize where gaps and irregular data in a dataset are. The function does
not differentiate between implicit gaps, which are missing timestamps of
the regular interval, explicit gaps, which are NA values. Optionally, the
function shows irregular data, which are datapoints that fall outside the
regular interval."><meta property="og:description" content="gg_gaps() is built upon gg_days(), gap_finder(), and gg_state() to
visualize where gaps and irregular data in a dataset are. The function does
not differentiate between implicit gaps, which are missing timestamps of
the regular interval, explicit gaps, which are NA values. Optionally, the
function shows irregular data, which are datapoints that fall outside the
regular interval."><meta property="og:image" content="https://tscnlab.github.io/LightLogR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LightLogR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Day.html">The whole game</a></li>
    <li><a class="dropdown-item" href="../articles/Import.html">Import &amp; cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/log.html">Log transformation</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/photoperiod.html">Photoperiod</a></li>
    <li><a class="dropdown-item" href="../articles/spectrum.html">Light Spectrum</a></li>
    <li><a class="dropdown-item" href="../articles/states.html">Durations, States and Clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Visualizations.html">Visualizations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tscnlab/LightLogR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualize gaps and irregular data</h1>
      <small class="dont-index">Source: <a href="https://github.com/tscnlab/LightLogR/blob/v0.9.0/R/gg_gaps.R" class="external-link"><code>R/gg_gaps.R</code></a></small>
      <div class="d-none name"><code>gg_gaps.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>gg_gaps()</code> is built upon <code><a href="gg_days.html">gg_days()</a></code>, <code><a href="gap_finder.html">gap_finder()</a></code>, and <code><a href="gg_state.html">gg_state()</a></code> to
visualize where gaps and irregular data in a dataset are. The function does
not differentiate between <code>implicit gaps</code>, which are missing timestamps of
the regular interval, <code>explicit gaps</code>, which are <code>NA</code> values. Optionally, the
function shows <code>irregular data</code>, which are datapoints that fall outside the
regular interval.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gg_gaps</span><span class="op">(</span></span>
<span>  <span class="va">dataset</span>,</span>
<span>  Variable.colname <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>  Datetime.colname <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>  fill.gaps <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  col.irregular <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  on.top <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  epoch <span class="op">=</span> <span class="st">"dominant.epoch"</span>,</span>
<span>  full.days <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show.irregulars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group.by.days <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include.implicit.gaps <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>A light logger dataset. Expects a <code>dataframe</code>. If not imported
by <a href="LightLogR-package.html">LightLogR</a>, take care to choose a sensible variable for the <code>x.axis.</code>.</p></dd>


<dt id="arg-variable-colname">Variable.colname<a class="anchor" aria-label="anchor" href="#arg-variable-colname"></a></dt>
<dd><p>Variable that becomes the basis for gap analysis.
expects a symbol</p></dd>


<dt id="arg-datetime-colname">Datetime.colname<a class="anchor" aria-label="anchor" href="#arg-datetime-colname"></a></dt>
<dd><p>The column that contains the datetime. Needs to be a
<code>POSIXct</code> and part of the dataset.</p></dd>


<dt id="arg-fill-gaps">fill.gaps<a class="anchor" aria-label="anchor" href="#arg-fill-gaps"></a></dt>
<dd><p>Fill color for the gaps</p></dd>


<dt id="arg-col-irregular">col.irregular<a class="anchor" aria-label="anchor" href="#arg-col-irregular"></a></dt>
<dd><p>Dot color for irregular data</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>A numerical value between 0 and 1 representing the transparency
of the gaps Default is 0.5.</p></dd>


<dt id="arg-on-top">on.top<a class="anchor" aria-label="anchor" href="#arg-on-top"></a></dt>
<dd><p>Logical scalar. If <code>TRUE</code>, the states will be plotted on top of
the existing plot. If <code>FALSE</code>, the states will be plotted underneath the</p></dd>


<dt id="arg-epoch">epoch<a class="anchor" aria-label="anchor" href="#arg-epoch"></a></dt>
<dd><p>The epoch to use for the gapless sequence. Can be either a
<code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">lubridate::duration()</a></code> or a string. If it is a string, it needs to be
either '"dominant.epoch"' (the default) for a guess based on the data or a
valid <code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">lubridate::duration()</a></code> string, e.g., <code>"1 day"</code> or <code>"10 sec"</code>.</p></dd>


<dt id="arg-full-days">full.days<a class="anchor" aria-label="anchor" href="#arg-full-days"></a></dt>
<dd><p>Logical. Whether full days are expected, even for the first
and last measurement</p></dd>


<dt id="arg-show-irregulars">show.irregulars<a class="anchor" aria-label="anchor" href="#arg-show-irregulars"></a></dt>
<dd><p>Logical. Show irregular data points. Default is
<code>FALSE</code>.</p></dd>


<dt id="arg-group-by-days">group.by.days<a class="anchor" aria-label="anchor" href="#arg-group-by-days"></a></dt>
<dd><p>Logical. Whether data should be grouped by days. This
can make sense if only very few days from large groups are affected</p></dd>


<dt id="arg-include-implicit-gaps">include.implicit.gaps<a class="anchor" aria-label="anchor" href="#arg-include-implicit-gaps"></a></dt>
<dd><p>Logical. Whether the time series should be expanded only the current observations taken.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments given to <code><a href="gg_days.html">gg_days()</a></code>. Can be used to change
the color or other aesthetic properties.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>ggplot</code> object with all gaps and optionally irregular data.
Groups that do not have any gaps nor irregular data will be removed for
clarity. Null if no groups remain</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#calling gg_gaps on a healthy dataset is pointless</span></span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op">|&gt;</span> <span class="fu">gg_gaps</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No gaps nor irregular values were found. Plot creation skipped</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#creating a gapped and irregular dataset</span></span></span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="va">sample.data.environment</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="aggregate_Datetime.html">aggregate_Datetime</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"5 mins"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="filter_Datetime.html">filter_Date</a></span><span class="op">(</span>length <span class="op">=</span> <span class="st">"6 days"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   Datetime <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html" class="external-link">date</a></span><span class="op">(</span><span class="va">Datetime</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html" class="external-link">date</a></span><span class="op">(</span><span class="va">Datetime</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="va">Datetime</span>, <span class="va">Datetime</span> <span class="op">+</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>     <span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">MEDI</span> <span class="op">&lt;</span><span class="fl">250</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="has_gaps.html">has_gaps</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="has_irregulars.html">has_irregulars</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#by default, gg_gaps() only shows gaps</span></span></span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">|&gt;</span> <span class="fu">gg_gaps</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 1 row containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_line()`).</span>
<span class="r-plt img"><img src="gg_gaps-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#it can also show irregular data</span></span></span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">|&gt;</span> <span class="fu">gg_gaps</span><span class="op">(</span>show.irregulars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 1 row containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_line()`).</span>
<span class="r-plt img"><img src="gg_gaps-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#if a Group has good data, it will not show up</span></span></span>
<span class="r-in"><span><span class="va">half_bad_dataset</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="va">bad_dataset</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Id</span> <span class="op">==</span> <span class="st">"Participant"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">sample.data.environment</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Id</span> <span class="op">==</span> <span class="st">"Environment"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#just to show that both are identical</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html" class="external-link">group_keys</a></span><span class="op">(</span><span class="va">half_bad_dataset</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Id         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Environment</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Participant</span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html" class="external-link">group_keys</a></span><span class="op">(</span><span class="va">bad_dataset</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Id         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Environment</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Participant</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">half_bad_dataset</span> <span class="op">|&gt;</span> <span class="fu">gg_gaps</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 1 row containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_line()`).</span>
<span class="r-plt img"><img src="gg_gaps-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Zauner, Manuel Spitschan, Steffen Hartmeyer, MeLiDos, EURAMET, European Union.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

